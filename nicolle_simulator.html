<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Nicolle Dias Simulator</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Arial', sans-serif; touch-action: none; background: #000; }
        
        /* UI Geral */
        #ui-container { position: absolute; top: 20px; left: 20px; color: white; pointer-events: none; z-index: 10; }
        #mission-box {
            background: rgba(255, 0, 222, 0.4);
            border: 2px solid #ff00de;
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
            text-shadow: 1px 1px 0 #000;
            box-shadow: 0 0 10px #ff00de;
        }
        h1 { margin: 0; font-size: 18px; color: #ff00de; text-transform: uppercase; }
        h2 { margin: 5px 0 0; font-size: 14px; color: #fff; }

        /* Dialogo da Porta */
        #door-dialog {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            border: 2px solid #ff00de;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            display: none;
            z-index: 100;
            color: white;
            box-shadow: 0 0 50px #ff00de;
        }
        .dialog-btn {
            background: #ff00de; color: white; border: none;
            padding: 10px 20px; margin: 10px; font-size: 16px;
            cursor: pointer; border-radius: 5px;
            font-weight: bold;
        }

        /* Notifica√ß√£o do PIX */
        #pix-alert {
            position: absolute;
            top: 20%; left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            color: #000;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: bold;
            display: none;
            z-index: 101;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            animation: slideDown 0.5s ease-out;
        }
        @keyframes slideDown { from {top: -10%;} to {top: 20%;} }

        /* Bot√£o A√ß√£o e Joystick */
        #action-btn {
            position: absolute; bottom: 30%; right: 20px;
            background: rgba(255, 0, 222, 0.8);
            color: white; width: 90px; height: 90px;
            border-radius: 50%; display: none;
            align-items: center; justify-content: center;
            font-weight: bold; font-size: 16px;
            border: 3px solid #fff; cursor: pointer; z-index: 20;
            box-shadow: 0 0 20px #ff00de;
        }
        #joystick-zone { position: absolute; bottom: 50px; left: 50px; width: 150px; height: 150px; z-index: 20; }
        
        #camera-hint {
            position: absolute; top: 10px; right: 10px; color: #aaa; font-size: 12px; pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="ui-container">
        <div id="mission-box">
            <h1 id="mission-title">MISS√ÉO 1</h1>
            <h2 id="mission-desc">V√° at√© a porta e fale com a Hostess.</h2>
        </div>
    </div>
    
    <div id="camera-hint">üëã Arraste na tela para girar a c√¢mera</div>

    <div id="door-dialog">
        <h3 style="margin-top:0">Hostess diz:</h3>
        <p>"Boa noite! QR Code ou Nome na Lista?"</p>
        <button class="dialog-btn" onclick="escolherEntrada('lista')">Nome na Lista</button>
        <button class="dialog-btn" onclick="escolherEntrada('qrcode')">QR Code</button>
    </div>

    <div id="pix-alert">üí∏ Pix Enviado: R$ 50,00</div>

    <div id="action-btn" onclick="executeAction()">A√á√ÉO</div>
    <div id="joystick-zone"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.9.0/nipplejs.min.js"></script>
    <script type="module">
        import * as THREE from 'https://unpkg.com/three@0.126.0/build/three.module.js';

        // ================= CONFIGURA√á√ÉO =================
        const MAIN_CHARS = {
            nicolle: 'nicolle.png', 
            marcao: 'jeffao.png', 
            hostess: 'hostess.png', 
            keyla: 'keyla.png',
            japa: 'japa.png',
            rival: 'npc12m.png',
            drink_icon: 'drink.png'
        };

        const NPC_GALLERY = [
            'npc1h.png', 'npc2h.png', 'npc3.png', 'npc4m.png', 'npc5h.png',
            'npc6m.png', 'npc7h.png', 'npc8h.png', 'npc9h.png', 'npc10h.png',
            'npc11m.png', 'npc13.png', 'npc14m.png', 'npc15h.png',
            'npc16h.png', 'npc17h.png', 'npc18h.png', 'npc20h.png', 'npc21h.png', 'npc22h.png', 'npc23h.png', 'npc24h.png', 'npc25h.png'
        ];

        // FRASES ALEAT√ìRIAS
        const PHRASES = [
            "After no cassiano?",
            "Algu√©m tem tabaco?",
            "Vem sempre aqui amor?",
            "T√° tarde j√°, to indo embora",
            "Saudade da minha ex"
            "Algu√©m viu o marc√£o?"
            "Me paga um drink ai vai"
            "Nossa que calor"
            "Bola mais um ai"
        ];

        let scene, camera, renderer;
        let nicolle, hostess, marcao;
        let npcs = [];
        let keyla, japa, rival;
        let mission = 1;
        let fights = 0;
        let entryGranted = false;
        let nearbyTarget = null;
        let joystickManager;
        let moveForward = 0, moveSide = 0;
        let discoLights = [];
        let mainDiscoLight; 
        const textureLoader = new THREE.TextureLoader();

        // --- C√ÇMERA ---
        let cameraAngle = 0;
        let cameraDistance = 25;
        let cameraHeight = 15;
        let isDragging = false;
        let previousMouseX = 0;

        // Elementos UI
        const uiTitle = document.getElementById('mission-title');
        const uiDesc = document.getElementById('mission-desc');
        const btnAction = document.getElementById('action-btn');
        const dialogBox = document.getElementById('door-dialog');
        const pixAlert = document.getElementById('pix-alert');

        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x020202);
            scene.fog = new THREE.Fog(0x020202, 10, 120);

            camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true; 
            document.body.appendChild(renderer.domElement);

            // --- ILUMINA√á√ÉO ---
            const ambient = new THREE.AmbientLight(0x606060); 
            scene.add(ambient);
            
            mainDiscoLight = new THREE.PointLight(0xff00de, 1.0, 70);
            mainDiscoLight.position.set(20, 20, 0); 
            scene.add(mainDiscoLight);

            const outsideLight = new THREE.DirectionalLight(0xffedcc, 1.5); 
            outsideLight.position.set(-30, 50, -20); 
            outsideLight.target.position.set(-10, 0, -10); 
            outsideLight.castShadow = true;
            scene.add(outsideLight);
            scene.add(outsideLight.target);

            createDiscoLights();

            // Cen√°rio
            createEnvironment();
            createSignage(); 
            createDJBooth(); 
            createBarArea(); 
            createRestroomArea(); 

            // Personagens Principais
            nicolle = createSprite(MAIN_CHARS.nicolle, -40, 2, 0, 5); 
            scene.add(nicolle);
            marcao = createSprite(MAIN_CHARS.marcao, -12, 2.5, -6, 6); 
            scene.add(marcao);
            hostess = createSprite(MAIN_CHARS.hostess, -8, 2, 6, 5); 
            scene.add(hostess);

            // Fila
            for(let i=0; i<8; i++) {
                let randomImg = NPC_GALLERY[Math.floor(Math.random() * NPC_GALLERY.length)];
                let npc = createSprite(randomImg, -14, 2, -8 - (i * 2.5), 4);
                npc.userData.isTalking = false; 
                npcs.push(npc); 
                scene.add(npc);
            }

            // Balada (Pista)
            for(let i=0; i<25; i++) { 
                let randomImg = NPC_GALLERY[Math.floor(Math.random() * NPC_GALLERY.length)];
                let isMan = randomImg.toLowerCase().includes('h');
                let npc = createSprite(randomImg, 10 + Math.random()*50, 2, -30 + Math.random()*60, 4.5);
                npc.userData.isTalking = false;

                if (!isMan) {
                    npc.userData.type = 'woman_fight';
                } else {
                    let hasDrink = Math.random() > 0.4;
                    npc.userData.type = hasDrink ? 'man_drink' : 'man';
                    if(hasDrink) {
                        let cup = createSprite(MAIN_CHARS.drink_icon, 0.5, -0.1, 0.1, 0.4); 
                        npc.add(cup);
                    }
                }
                npcs.push(npc); scene.add(npc);
            }

            keyla = createSprite(MAIN_CHARS.keyla, 55, 2, -35, 5);
            keyla.userData = { type: 'keyla' }; keyla.material.color.setHex(0xffaaaa);
            npcs.push(keyla); scene.add(keyla);

            japa = createSprite(MAIN_CHARS.japa, 60, 2, 0, 5);
            japa.userData = { type: 'japa' }; npcs.push(japa); scene.add(japa);

            rival = createSprite(MAIN_CHARS.rival, 62, 2, 0, 4.5);
            rival.material.color.setHex(0xaaffaa); scene.add(rival);

            initJoystick();
            initCameraControls();
            startRandomSpeechLoop(); 
            animate();
        }

        // --- SISTEMA DE BAL√ïES DE FALA (AJUSTADO) ---
        function startRandomSpeechLoop() {
            // Frequ√™ncia reduzida: agora tenta falar a cada 8 segundos (8000ms)
            setInterval(() => {
                if (npcs.length === 0) return;
                let speaker = npcs[Math.floor(Math.random() * npcs.length)];
                
                if (speaker && !speaker.userData.isTalking) {
                    let phrase = PHRASES[Math.floor(Math.random() * PHRASES.length)];
                    speak(speaker, phrase);
                }
            }, 8000); 
        }

        function speak(npc, text) {
            npc.userData.isTalking = true;

            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 256; canvas.height = 128;
            
            // Desenho do bal√£o
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(10, 10, 236, 108);
            ctx.strokeStyle = '#000000'; ctx.lineWidth = 4;
            ctx.strokeRect(10, 10, 236, 108);
            
            // Texto
            ctx.font = 'bold 24px Arial';
            ctx.fillStyle = '#000000';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            const words = text.split(' ');
            let line1 = text; let line2 = "";
            if(words.length > 3) {
                const mid = Math.ceil(words.length / 2);
                line1 = words.slice(0, mid).join(' ');
                line2 = words.slice(mid).join(' ');
            }

            if(line2) {
                ctx.fillText(line1, 128, 50);
                ctx.fillText(line2, 128, 80);
            } else {
                ctx.fillText(text, 128, 64);
            }

            const texture = new THREE.CanvasTexture(canvas);
            const bubbleMat = new THREE.SpriteMaterial({ map: texture });
            const bubble = new THREE.Sprite(bubbleMat);
            
            // TAMANHO REDUZIDO (Era 4, 2, 1 -> Agora 1.5, 0.75, 1)
            bubble.position.set(0, 1.0, 0); 
            bubble.scale.set(1.4, 0.75, 1); 
            
            npc.add(bubble); 

            setTimeout(() => {
                npc.remove(bubble);
                npc.userData.isTalking = false;
            }, 4000);
        }


        // --- CONTROLES DE C√ÇMERA ---
        function initCameraControls() {
            document.addEventListener('mousedown', onPointerDown);
            document.addEventListener('mousemove', onPointerMove);
            document.addEventListener('mouseup', onPointerUp);
            document.addEventListener('touchstart', onPointerDown, {passive: false});
            document.addEventListener('touchmove', onPointerMove, {passive: false});
            document.addEventListener('touchend', onPointerUp);
        }
        function onPointerDown(e) {
            if (e.target.id === 'action-btn' || e.target.closest('#joystick-zone')) return;
            isDragging = true;
            previousMouseX = e.clientX || e.touches[0].clientX;
        }
        function onPointerMove(e) {
            if (!isDragging) return;
            const clientX = e.clientX || e.touches[0].clientX;
            const deltaX = clientX - previousMouseX;
            cameraAngle -= deltaX * 0.005; 
            previousMouseX = clientX;
        }
        function onPointerUp() { isDragging = false; }

        // --- JOYSTICK ---
        function initJoystick() {
            joystickManager = nipplejs.create({
                zone: document.getElementById('joystick-zone'),
                mode: 'static', position: { left: '50%', top: '50%' }, color: 'white'
            });
            joystickManager.on('move', (evt, data) => {
                const joyAngle = data.angle.radian;
                moveSide = -Math.cos(joyAngle); 
                moveForward = Math.sin(joyAngle);
            });
            joystickManager.on('end', () => { moveForward = 0; moveSide = 0; });
        }

        // --- CEN√ÅRIO ---
        function createDiscoLights() {
            const colors = [0xff0000, 0x00ff00, 0x0000ff, 0xffff00];
            for(let i=0; i<4; i++) {
                const light = new THREE.SpotLight(colors[i], 3);
                light.position.set(30, 25, 0); 
                light.angle = Math.PI / 6; light.penumbra = 0.5; light.distance = 80;
                const target = new THREE.Object3D(); scene.add(target); light.target = target; scene.add(light);
                discoLights.push({ light: light, target: target, offset: i * 2, speed: 0.02 + (i*0.01) });
            }
        }
        function createDJBooth() {
            const stage = new THREE.Mesh(new THREE.BoxGeometry(10, 4, 30), new THREE.MeshStandardMaterial({color: 0x111111}));
            stage.position.set(70, 2, 0); scene.add(stage);
            const table = new THREE.Mesh(new THREE.BoxGeometry(4, 3, 10), new THREE.MeshStandardMaterial({color: 0x333333}));
            table.position.set(66, 4, 0); scene.add(table);
            const canvas = document.createElement('canvas'); canvas.width = 256; canvas.height = 128;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#000'; ctx.fillRect(0,0,256,128);
            ctx.strokeStyle = '#00ffff'; ctx.lineWidth = 8; ctx.strokeRect(5,5,246,118);
            ctx.font = 'bold 40px Arial'; ctx.fillStyle = '#00ffff'; ctx.textAlign = 'center'; ctx.fillText("DJ GATTI", 128, 75);
            const tex = new THREE.CanvasTexture(canvas);
            const sign = new THREE.Mesh(new THREE.PlaneGeometry(10, 5), new THREE.MeshBasicMaterial({map: tex, side: THREE.DoubleSide}));
            sign.position.set(65, 10, 0); sign.rotation.y = -Math.PI / 2; scene.add(sign);
        }
        function createBarArea() {
            const bar = new THREE.Mesh(new THREE.BoxGeometry(30, 3, 4), new THREE.MeshStandardMaterial({color: 0x330000}));
            bar.position.set(30, 1.5, -45); scene.add(bar);
            const canvas = document.createElement('canvas'); canvas.width = 128; canvas.height = 64;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#220000'; ctx.fillRect(0,0,128,64);
            ctx.font = 'bold 40px Arial'; ctx.fillStyle = '#ffaa00'; ctx.textAlign = 'center'; ctx.fillText("BAR", 64, 45);
            const tex = new THREE.CanvasTexture(canvas);
            const sign = new THREE.Mesh(new THREE.PlaneGeometry(8, 4), new THREE.MeshBasicMaterial({map: tex}));
            sign.position.set(30, 6, -45); scene.add(sign);
        }
        function createRestroomArea() {
            const wall1 = new THREE.Mesh(new THREE.BoxGeometry(20, 12, 1), new THREE.MeshStandardMaterial({color: 0x222222}));
            wall1.position.set(30, 6, 35); scene.add(wall1);
            const canvas = document.createElement('canvas'); canvas.width = 64; canvas.height = 64;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#fff'; ctx.fillRect(0,0,64,64);
            ctx.font = 'bold 40px Arial'; ctx.fillStyle = '#000'; ctx.textAlign = 'center'; ctx.fillText("WC", 32, 45);
            const tex = new THREE.CanvasTexture(canvas);
            const sign = new THREE.Mesh(new THREE.PlaneGeometry(3, 3), new THREE.MeshBasicMaterial({map: tex}));
            sign.position.set(30, 8, 34.4); sign.rotation.y = Math.PI; scene.add(sign);
        }
        function createSignage() {
            const canvas = document.createElement('canvas'); canvas.width = 512; canvas.height = 256;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#110011'; ctx.fillRect(0,0,512,256);
            ctx.strokeStyle = '#ff00de'; ctx.lineWidth = 15; ctx.strokeRect(10,10,492,236);
            ctx.font = 'bold 60px Arial'; ctx.fillStyle = '#ff00de'; ctx.textAlign = 'center'; ctx.fillText("LUCKY SCOPE", 256, 120);
            ctx.font = 'italic 30px Arial'; ctx.fillStyle = '#ffffff'; ctx.fillText("Nosso After", 256, 180);
            const texture = new THREE.CanvasTexture(canvas);
            const sign = new THREE.Mesh(new THREE.PlaneGeometry(14, 7), new THREE.MeshBasicMaterial({ map: texture, transparent: true, side: THREE.DoubleSide }));
            sign.position.set(-11.5, 10, 0); sign.rotation.y = -Math.PI / 2; scene.add(sign);
        }

        function createEnvironment() {
            const asphalt = new THREE.Mesh(
                new THREE.PlaneGeometry(200, 200), 
                new THREE.MeshStandardMaterial({ color: 0x111111, roughness: 0.9 })
            );
            asphalt.rotation.x = -Math.PI/2;
            asphalt.position.y = -0.05; 
            scene.add(asphalt);

            const sidewalk = new THREE.Mesh(
                new THREE.PlaneGeometry(30, 60), 
                new THREE.MeshStandardMaterial({ color: 0x555555, roughness: 0.6 })
            );
            sidewalk.rotation.x = -Math.PI/2;
            sidewalk.position.set(-20, 0, 0); 
            scene.add(sidewalk);

            const clubFloor = new THREE.Mesh(
                new THREE.PlaneGeometry(100, 100), 
                new THREE.MeshStandardMaterial({ color: 0x220022, roughness: 0.1, metalness: 0.2 })
            );
            clubFloor.rotation.x = -Math.PI/2;
            clubFloor.position.set(40, 0.01, 0); 
            scene.add(clubFloor);

            const wallMat = new THREE.MeshStandardMaterial({ color: 0x000000 });
            const wallEntry = new THREE.Mesh(new THREE.BoxGeometry(2, 12, 100), wallMat); wallEntry.position.set(-10, 6, 0); scene.add(wallEntry);
            const wallBack = new THREE.Mesh(new THREE.BoxGeometry(2, 12, 100), wallMat); wallBack.position.set(75, 6, 0); scene.add(wallBack);
            const wallSide1 = new THREE.Mesh(new THREE.BoxGeometry(87, 12, 2), wallMat); wallSide1.position.set(32.5, 6, 50); scene.add(wallSide1);
            const wallSide2 = new THREE.Mesh(new THREE.BoxGeometry(87, 12, 2), wallMat); wallSide2.position.set(32.5, 6, -50); scene.add(wallSide2);
            createColumn(-10, 6, 8); createColumn(-10, 6, -8);
        }
        function createColumn(x,y,z) {
            const m = new THREE.Mesh(new THREE.BoxGeometry(3,12,3), new THREE.MeshStandardMaterial({color:0x333333}));
            m.position.set(x,y,z); scene.add(m);
        }
        function createSprite(url, x, y, z, s) {
            const map = textureLoader.load(url);
            const mat = new THREE.SpriteMaterial({ map: map });
            const sprite = new THREE.Sprite(mat);
            sprite.position.set(x,y,z);
            sprite.scale.set(s,s,1);
            return sprite;
        }

        // --- L√ìGICA DO JOGO ---
        window.escolherEntrada = function(tipo) {
            dialogBox.style.display = 'none';
            if (tipo === 'qrcode') {
                pixAlert.style.display = 'block';
                setTimeout(() => { pixAlert.style.display = 'none'; }, 3000);
            }
            entryGranted = true;
            mission = 2;
            updateUI("MISS√ÉO 2: AS BRIGAS", "Puxe o cabelo de 3 mulheres na pista! (0/3)");
            nicolle.position.x = -4; 
        };

        function updateGameLogic() {
            const camDirX = -Math.sin(cameraAngle); 
            const camDirZ = -Math.cos(cameraAngle); 
            const camRightX = -Math.cos(cameraAngle);
            const camRightZ = Math.sin(cameraAngle);
            
            const speed = 0.25;
            
            const finalMoveX = (camDirX * moveForward + camRightX * moveSide) * speed;
            const finalMoveZ = (camDirZ * moveForward + camRightZ * moveSide) * speed;

            nicolle.position.x += finalMoveX;
            nicolle.position.z += finalMoveZ;

            if (!entryGranted && nicolle.position.x > -8) {
                nicolle.position.x = -8.2; dialogBox.style.display = 'block'; moveForward = 0; moveSide = 0; 
            }

            const time = Date.now() * 0.001;
            mainDiscoLight.intensity = 0.8 + Math.sin(time * 2) * 0.4;
            discoLights.forEach(dl => {
                dl.target.position.x = 30 + Math.cos(time * dl.speed + dl.offset) * 30;
                dl.target.position.z = Math.sin(time * dl.speed + dl.offset) * 40;
                if(Math.random() > 0.92) dl.light.intensity = 5; else dl.light.intensity = 1;
            });

            btnAction.style.display = 'none';
            nearbyTarget = null;

            npcs.forEach(npc => {
                if (nicolle.position.distanceTo(npc.position) < 5 && !npc.userData.interacted) {
                    if (mission === 2 && npc.userData.type === 'woman_fight') showBtn("BRIGAR", npc);
                    if (mission === 3 && npc.userData.type === 'man_drink') showBtn("PEGAR DRINK", npc);
                    if (mission === 4 && npc.userData.type === 'keyla') showBtn("MOLHAR KEYLA", npc);
                    if (mission === 5 && npc.userData.type === 'japa') showBtn("PEGAR JAPA", npc);
                }
            });
        }

        function showBtn(txt, tgt) {
            nearbyTarget = tgt;
            btnAction.innerText = txt;
            btnAction.style.display = 'flex';
        }

        window.executeAction = function() {
            if(!nearbyTarget) return;
            nicolle.position.y += 1.5; setTimeout(()=>nicolle.position.y-=1.5, 200); 

            if(mission === 2) {
                nearbyTarget.userData.interacted = true;
                nearbyTarget.material.color.setHex(0x555555);
                nearbyTarget.rotation.z = 1.5; 
                fights++;
                updateUI("MISS√ÉO 2", `Brigas: ${fights}/3`);
                if(fights>=3) { mission=3; updateUI("MISS√ÉO 3: DRINK", "V√° ao BAR ou ache algu√©m com bebida!"); }
            }
            else if(mission === 3) {
                nearbyTarget.userData.interacted = true;
                nearbyTarget.children[0].visible = false;
                mission=4; updateUI("MISS√ÉO 4: KEYLA", "Keyla est√° perto do BAR. Derrube nela!");
            }
            else if(mission === 4) {
                nearbyTarget.userData.interacted = true;
                nearbyTarget.material.color.setHex(0xff0000);
                mission=5; updateUI("MISS√ÉO FINAL", "O Japa est√° na frente do Palco DJ GATTI!");
            }
            else if(mission === 5) {
                rival.position.x += 10;
                nicolle.position.x = japa.position.x - 2; nicolle.position.z = japa.position.z;
                updateUI("FIM DE JOGO", "Voc√™ conquistou o Japa ao som do DJ GATTI!");
                btnAction.style.display = 'none';
            }
        }

        function updateUI(t, d) { uiTitle.innerText=t; uiDesc.innerText=d; }

        function animate() {
            requestAnimationFrame(animate);
            updateGameLogic();
            
            const offsetX = Math.sin(cameraAngle) * cameraDistance;
            const offsetZ = Math.cos(cameraAngle) * cameraDistance;

            camera.position.x = nicolle.position.x + offsetX;
            camera.position.z = nicolle.position.z + offsetZ;
            camera.position.y = nicolle.position.y + cameraHeight; 
            
            camera.lookAt(nicolle.position);
            
            renderer.render(scene, camera);
        }

        init();
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth/window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth,window.innerHeight);
        });
    </script>
</body>
</html>
